# Epic2: ページ遷移の問題をデバッグする方法

## 問題

学校検索ページから学校をクリックしてもページ遷移しない。

## デバッグ手順

### 1. ブラウザの開発者ツールを開く

1. ブラウザで学校検索ページ（`http://localhost:3000/schools`）を開く
2. **F12キー**を押して開発者ツールを開く
3. **「Console」タブ**を開く

### 2. コンソールでエラーを確認

学校カードをクリックしたときに、コンソールに以下のようなログが表示されるはずです：

```
SchoolCard href: /schools/[slug] slug: [slugの値] id: [idの値]
```

または

```
SchoolCard href: /schools/id/[id] slug: null id: [idの値]
```

**エラーメッセージがないか確認してください。**

### 3. ネットワークタブでAPIリクエストを確認

1. 開発者ツールの**「Network」タブ**を開く
2. 学校カードをクリック
3. `/api/schools/[slug]`または`/api/schools/id/[id]`へのリクエストがあるか確認
4. リクエストのステータスコードを確認（200 OK か、エラーか）

### 4. ターミナルでサーバーログを確認

開発サーバーが起動しているターミナルで、エラーメッセージが表示されていないか確認してください。

## よくある問題と解決方法

### 問題1: slugがnullでIDベースのURLに遷移している

**確認方法**: コンソールに`SchoolCard href: /schools/id/[id]`と表示される

**解決方法**: `supabase-schema-epic2-update-school-slugs.sql`を実行して、既存の学校にslugを設定してください。

### 問題2: APIエラーが発生している

**確認方法**: ネットワークタブで`/api/schools/[slug]`のリクエストが404または500エラーを返している

**解決方法**: 
- Supabaseで`schools`テーブルにデータが存在するか確認
- `slug`カラムが正しく設定されているか確認
- ターミナルのエラーメッセージを確認

### 問題3: Next.jsのルーティングエラー

**確認方法**: ブラウザのコンソールにNext.jsのエラーメッセージが表示される

**解決方法**:
- 開発サーバーを再起動（`Ctrl + C` → `npm run dev`）
- `.next`フォルダを削除してから再起動

### 問題4: slugに特殊文字が含まれている

**確認方法**: slugにURLに使用できない文字（スペース、特殊文字など）が含まれている

**解決方法**: `supabase-schema-epic2-update-school-slugs.sql`を実行して、slugを正規化してください。

## 次のステップ

デバッグ結果を確認したら、エラーメッセージの内容を共有してください。それに基づいて、具体的な解決方法を提案します。
















