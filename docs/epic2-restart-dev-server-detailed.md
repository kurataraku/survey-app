# Epic2: 開発サーバーの再起動手順（詳細版）

## 現在の状況

ブラウザで`http://localhost:3001/schools`にアクセスすると「接続が拒否されました」エラーが発生しています。

## 解決手順

### Step 1: 現在の開発サーバーを停止

1. **Cursorのターミナルウィンドウを開く**
   - 下部のターミナルパネルをクリック
   - または、`Ctrl + `` （バッククォート）を押す

2. **開発サーバーを起動しているターミナルタブを確認**
   - ターミナルタブが複数ある場合、`npm run dev`を実行したタブを選択

3. **開発サーバーを停止**
   - `Ctrl + C`を押す
   - 複数回押す必要がある場合があります
   - 「Terminated」などのメッセージが表示されるまで待つ

### Step 2: 開発サーバーを再起動

1. **プロジェクトディレクトリに移動**
   ```cmd
   cd C:\Users\taka-\OneDrive\デスクトップ\project\survey-app
   ```

2. **開発サーバーを起動**
   ```cmd
   npm run dev
   ```

3. **「✓ Ready」メッセージを待つ**
   - 以下のようなメッセージが表示されるまで待ちます（数秒〜数十秒かかる場合があります）：
     ```
     ✓ Ready in Xms
     ```
   - このメッセージが表示されるまで、ブラウザでアクセスしないでください

### Step 3: ブラウザで確認

1. **「✓ Ready」メッセージが表示されたら、ブラウザでアクセス**
   ```
   http://localhost:3001/schools
   ```
   （または表示されたポート番号に合わせてください）

2. **ページが表示されることを確認**

## トラブルシューティング

### 問題1: `Ctrl + C`を押しても停止しない

**解決方法**:
1. ターミナルで`Ctrl + C`を数回押す
2. それでも停止しない場合、ターミナルタブを閉じる（×ボタンをクリック）
3. 新しいターミナルタブを開いて再度起動

### 問題2: ポートが既に使用されている

**確認方法**:
ターミナルに以下のようなメッセージが表示される場合：
```
⚠ Port 3000 is in use by process 27120, using available port 3001 instead.
```

**対応**:
- 問題ありません。別のポート（例：3001）で起動されます
- ブラウザで表示されたポート番号（例：`http://localhost:3001`）にアクセスしてください

### 問題3: 「✓ Ready」が表示されない

**確認事項**:
1. ターミナルにエラーメッセージが表示されていないか確認
2. ターミナルをスクロールして、最新のメッセージを確認
3. ビルドエラーやTypeScriptエラーが表示されていないか確認

**解決方法**:
- エラーメッセージの内容に応じて対処
- エラーが解決できない場合、エラーメッセージの内容を共有してください

### 問題4: 環境変数エラー

ターミナルに以下のようなメッセージが表示される場合：
```
Error: NEXT_PUBLIC_SUPABASE_URL is not defined
```

**解決方法**:
1. `.env.local`ファイルがプロジェクトルートにあることを確認
2. ファイル名が`.env.local`であることを確認（`.env.local.txt`ではない）
3. 環境変数が正しく設定されていることを確認

## 確認チェックリスト

- [ ] 開発サーバーを停止した（`Ctrl + C`）
- [ ] プロジェクトディレクトリに移動した
- [ ] `npm run dev`を実行した
- [ ] 「✓ Ready」メッセージが表示されるまで待った
- [ ] ブラウザで正しいURL（表示されたポート番号）にアクセスした
- [ ] ページが正常に表示された



